import{languages}from"./languages.min.js";let langList=[];function getDates(e,t,n,a,s){let l={numbers:{done:[],overdue:[],remaining:[]},strings:{done:[],overdue:[],remaining:[]}};const r=new Date,o=r.getDate(),i=r.getMonth(),c=r.getFullYear(),u=t.split("."),g=n.split("."),d=a.split("."),m={sM:parseInt(u[1])-1,sY:parseInt(u[0]),cM:parseInt(g[1])-1,cY:parseInt(g[0]),eM:parseInt(d[1])-1,eY:parseInt(d[0])};for(let t=m.sY;t<=m.eY;t++){let n=0,a=11;t===m.sY&&(n=m.sM),t===m.eY&&(a=m.eM);for(let r=n;r<=a;r++){const n={day:"numeric",month:"short",year:"numeric"},a=new Date(t,r,e).toLocaleString(s,n),u=[t,r,e];m.cY>t||m.cY==t&&m.cM>r?(l.numbers.done.push(u),l.strings.done.push(a)):t<c||t==c&&r<i||t==c&&r==i&&e<=o?(l.numbers.overdue.push(u),l.strings.overdue.push(a)):(l.numbers.remaining.push(u),l.strings.remaining.push(a))}}return l}export function wrapContent(e){if((e=JSON.parse(e)).list){document.querySelector(".language-select").innerHTML="",document.querySelector(".contents").innerHTML="",langList=[],e.languages?e.languages.forEach((e=>{languages[e]?langList.push(e):langList.push(null)})):langList.push("English"),langList.forEach((e=>{null!==e&&(document.querySelector(".language-select").innerHTML+=`<div value='${e}'>${languages[e].langName}</div>`,document.querySelector(".contents").innerHTML+=`<div class='language-table' value='${e}'></div>`)}));for(let t=0;t<langList.length;t++)if(null!==langList[t]){const n=languages[langList[t]].locale;e.list.forEach((a=>{let s={title:a.title[t],platform:"?",account:"?",monthly_payment:parseInt(a.monthly_payment).toLocaleString(languages[langList[t]].locale)+" "+e.currency[t],dates:""};e.platforms[a.platform][t]&&(s.platform=e.platforms[a.platform][t]),e.accounts[a.account][t]&&(s.account=e.accounts[a.account][t]);const l=getDates(a.day_of_payment,a.started,a.closest_month,a.ends,n);l.strings.done.forEach((e=>{s.dates+=`<div class='done'>${e}</div>`})),l.strings.overdue.forEach((e=>{s.dates+=`<div class='overdue'>${e}</div>`})),l.strings.remaining.forEach((e=>{s.dates+=`<div>${e}</div>`})),document.querySelector(`.contents > div[value='${langList[t]}']`).innerHTML+=`\n                    <div class='row'>\n                        <div class='meta'>\n                            <div class='title'>${s.title}</div>\n                            <div class='right'>\n                                <div>${s.platform}</div>\n                                <div>${s.account}</div>\n                                <div><strong>${s.monthly_payment}</strong></div>\n                            </div>\n                        </div>\n                        <div class='dates'>${s.dates}</div>\n                    </div>\n                `}))}document.querySelectorAll(".language-select > div").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget.getAttribute("value");document.querySelector(".language-table.show").classList.remove("show"),document.querySelector(`.language-table[value='${t}']`).classList.add("show")}))})),document.querySelectorAll(".language-table")[0].classList.add("show")}}